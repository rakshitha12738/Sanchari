<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>üåç SANCHARI - Your Smart Travel Guide</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caveat+Brush&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Nunito:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* Reset & base */
        * { margin:0; padding:0; box-sizing:border-box; }
        html,body { height:100%; scroll-behavior: smooth; }
        :root{
            /* Olive Green Color Palette */
            --primary: #6B8E23;        /* Olive Green */
            --primary-light: #8FBC3F;  /* Light Olive */
            --primary-dark: #556B2F;   /* Dark Olive */
            --secondary: #9ACD32;      /* Yellow Green */
            --secondary-light: #B5D96C; /* Light Yellow Green */
            --accent: #708238;         /* Muted Olive */
            --accent-light: #A4B968;   /* Light Muted Olive */
            
            /* Backgrounds */
            --bg-gradient-start: #F5F8F0; /* Light Olive Cream */
            --bg-gradient-end: #E8F0DB;   /* Pale Olive */
            --bg-overlay: rgba(255, 255, 255, 0.65);
            
            /* Neutrals */
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --text-muted: #94A3B8;
            
            /* Glass Effects */
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.15);
        }
        
        body{
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            padding: 18px 0px;
            position: relative;
            overflow-x: hidden;

        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(107, 142, 35, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(112, 130, 56, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(143, 188, 63, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container{ 
                    max-width: 1400px;
                        margin: 0 auto 60px auto;
                        position: relative;
                        z-index: 1;
        }

        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            padding: 0;
            animation: slideDown 0.5s ease-out;
        }
        
        .navbar-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 16px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-family: 'Caveat Brush', cursive;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
            font-weight: 700;
        }
        
        .navbar-menu {
            display: flex;
            gap: 48px;
            align-items: center;
            list-style: none;
            margin-left: auto;
        }
        
        .navbar-menu a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 1.08rem;
            letter-spacing: 0.5px;
            font-family: 'Playfair Display', serif;
            transition: all 0.3s ease;
            position: relative;
            padding: 4px 0;
        }
        
        .navbar-menu a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            transition: width 0.3s ease;
        }
        
        .navbar-menu a:hover::after {
            width: 100%;
        }
        
        .navbar-menu a:hover {
            color: var(--primary);
        }
        
        .navbar-cta {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white !important;
            padding: 10px 24px;
            border-radius: 25px;
            font-weight: 600;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }
        
        .navbar-cta:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .navbar-cta::after {
            display: none;
        }
        
        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            background: none;
            border: none;
            padding: 8px;
        }
        
        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .navbar-content {
                padding: 12px 16px;
            }
            
            .navbar-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                right: 0;
                flex-direction: column;
                background: var(--glass-bg);
                backdrop-filter: blur(10px);
                padding: 24px;
                gap: 20px;
                box-shadow: var(--shadow-lg);
                transition: left 0.3s ease;
                align-items: flex-start;
            }
            
            .navbar-menu.active {
                left: 0;
            }
            
            .menu-toggle {
                display: flex;
            }
            
            .menu-toggle.active span:nth-child(1) {
                transform: rotate(45deg) translate(8px, 8px);
            }
            
            .menu-toggle.active span:nth-child(2) {
                opacity: 0;
            }
            
            .menu-toggle.active span:nth-child(3) {
                transform: rotate(-45deg) translate(7px, -7px);
            }
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Header */
        .header{ 
            text-align: center; 
            margin-top: 100px;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }
        
        .header h1{
            display: inline-flex; 
            align-items: center; 
            gap: 16px;
            font-size: 3.5rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            font-family: 'Caveat Brush', cursive;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .header h1::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 2px;
            opacity: 0.6;
        }
        
        .header p{ 
            color: var(--text-secondary); 
            margin-top: 16px; 
            font-size: 1.1rem;
            font-weight: 500;
            letter-spacing: 0.3px;
        }
        
        .header .explore-link{
            display: inline-block;
            margin-top: 1.5rem;
            padding: 14px 32px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.05rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 24px rgba(107, 142, 35, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .header .explore-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .header .explore-link:hover::before {
            left: 100%;
        }
        
        .header .explore-link:hover{
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(107, 142, 35, 0.4);
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Card look for main areas */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 24px;
            box-shadow: var(--glass-shadow);
            border: 2px solid var(--glass-border);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        /* Search */
        .search-container.card{ 
            display: flex; 
            flex-direction: column; 
            gap: 16px; 
            margin-bottom: 32px;
            animation: fadeIn 0.8s ease-out 0.2s both;
        }
        
        .search-form{ 
            display: flex; 
            gap: 12px; 
            align-items: center;
            flex-wrap: wrap;
        }
        
        .search-input{
            flex: 1; 
            min-width: 320px; 
            padding: 16px 24px; 
            border-radius: 50px; 
            border: 2px solid rgba(107, 142, 35, 0.15);
            background: white; 
            color: var(--text-primary); 
            font-size: 1rem;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .search-input::placeholder{ 
            color: var(--text-muted);
            font-weight: 400;
        }
        
        .search-input:focus{ 
            outline: none; 
            box-shadow: 0 0 0 4px rgba(107, 142, 35, 0.1), 0 8px 24px rgba(107, 142, 35, 0.15); 
            transform: translateY(-2px); 
            border-color: var(--primary);
        }
        
        .search-btn{
            padding: 16px 28px; 
            border-radius: 50px; 
            border: none; 
            cursor: pointer;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white; 
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 8px 24px rgba(107, 142, 35, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .search-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .search-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .search-btn:hover{
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(107, 142, 35, 0.4);
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .suggestions{ 
            display: flex; 
            gap: 12px; 
            flex-wrap: wrap; 
            justify-content: center; 
            margin-top: 8px;
        }
        
        .suggestion-tag{
            padding: 10px 20px; 
            border-radius: 50px; 
            cursor: pointer; 
            color: var(--text-primary);
            background: white;
            font-weight: 600; 
            border: 2px solid rgba(107, 142, 35, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }
        
        .suggestion-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        
        .suggestion-tag:hover, .suggestion-tag.active{ 
            transform: translateY(-4px); 
            box-shadow: var(--shadow-md); 
            color: white;
            border-color: transparent;
        }
        
        .suggestion-tag:hover::before, .suggestion-tag.active::before {
            opacity: 1;
        }

        /* WHY SANCHARI ‚Äî enlarged + highlighted */
        .why-section{
            margin: 40px 0;
            border-radius: 28px;
            padding: 40px 32px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            align-items: center;
            position: relative;
            transition: all 0.3s ease;
            border: 2px solid rgba(99, 102, 241, 0.2);
            box-shadow: var(--glass-shadow);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            overflow: hidden;
            animation: fadeIn 0.8s ease-out 0.4s both;
        }
        
        .why-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* extra large and prominent title */
        .why-title{
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Caveat Brush', cursive;
            position: relative;
            z-index: 1;
        }

        /* gentle pulse highlight */
        .why-section.highlight{
            box-shadow: var(--shadow-xl);
            transform: scale(1.01);
        }

        .why-list{ 
            display: flex; 
            gap: 16px; 
            flex-wrap: wrap; 
            justify-content: center; 
            align-items: center; 
            position: relative;
            z-index: 1;
        }
        
        .why-item{
            display: inline-flex; 
            gap: 12px; 
            align-items: center; 
            padding: 14px 24px; 
            border-radius: 50px;
            background: white;
            color: var(--text-primary); 
            font-weight: 600; 
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            border: 2px solid rgba(99, 102, 241, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .why-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
            transition: left 0.4s ease;
            z-index: -1;
        }
        
        .why-item:hover{ 
            transform: translateY(-6px); 
            box-shadow: var(--shadow-md); 
            color: white;
            border-color: transparent;
        }
        
        .why-item:hover::before {
            left: 0;
        }

        /* rolling images with soft fade edges */
        .rolling-wrap{ 
            width: 100%; 
            position: relative; 
            margin-top: 24px; 
            padding: 16px 0; 
            border-radius: 20px; 
            overflow: hidden; 
            background: transparent;
        }
        
        .fade-edge{ 
            position: absolute; 
            top: 0; 
            bottom: 0; 
            width: 120px; 
            pointer-events: none; 
            z-index: 3; 
        }
        
        .fade-edge.left{ 
            left: 0; 
            background: linear-gradient(90deg, var(--bg-gradient-start) 0%, rgba(255,255,255,0) 100%); 
        }
        
        .fade-edge.right{ 
            right: 0; 
            background: linear-gradient(270deg, var(--bg-gradient-end) 0%, rgba(255,255,255,0) 100%); 
        }

        .rolling-track{
            display: flex; 
            gap: 20px; 
            align-items: center; 
            padding: 8px 32px;
            animation: roll-left 30s linear infinite;
            width: max-content;
            will-change: transform;
        }
        
        .rolling-track a {
            display: inline-block;
            flex: 0 0 auto;
        }
        
        .rolling-track:hover{ 
            animation-play-state: paused; 
        }
        
        .rolling-img{
            width: 340px; 
            height: 200px; 
            object-fit: cover; 
            border-radius: 20px; 
            flex: 0 0 auto;
            box-shadow: var(--shadow-md); 
            cursor: pointer; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 3px solid white;
            position: relative;
            overflow: hidden;
            display: block;
        }
        
        .rolling-img::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(107, 142, 35, 0.3) 0%, rgba(112, 130, 56, 0.3) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .rolling-img:hover{ 
            transform: translateY(-12px) scale(1.05); 
            box-shadow: var(--shadow-xl);
        }
        
        .rolling-img:hover::after {
            opacity: 1;
        }

        @keyframes roll-left{
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* State Sections */
        .state-heading { 
            text-align: center; 
            margin: 80px 0 32px; 
            font-family: 'Playfair Display', serif; 
            font-size: 42px; 
            font-weight: 700; 
            color: var(--text-primary);
            letter-spacing: 2px; 
        }
        
        .state-section { 
            font-family: 'Nunito', sans-serif; 
            padding: 50px 30px; 
            background-size: cover; 
            background-position: center; 
            position: relative; 
            color: #fff; 
            border-radius: 32px; 
            margin-bottom: 60px; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            min-height: 480px;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            transition: all 0.4s ease;
            animation: fadeIn 0.8s ease-out;
        }
        
        .state-section:hover {
            transform: scale(1.02);
            box-shadow: 0 24px 80px rgba(0, 0, 0, 0.2);
        }
        
        .state-section::before { 
            content: ""; 
            position: absolute; 
            inset: 0; 
            background: linear-gradient(135deg, rgba(107, 142, 35, 0.7) 0%, rgba(112, 130, 56, 0.6) 100%);
            border-radius: 32px; 
            z-index: 0; 
            transition: opacity 0.4s ease;
        }
        
        .state-section:hover::before {
            opacity: 0.85;
        }
        
        .state-content { 
            position: relative; 
            z-index: 1; 
            text-align: center; 
            max-width: 960px; 
            margin: 0 auto; 
            background: rgba(0, 0, 0, 0.4); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 32px; 
            border-radius: 24px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .state-content .state-heading{
            margin: 0 0 28px 0;
        }
        
        .state-content .state-heading a{
            color: inherit;
            text-decoration: none;
            font-size: 2.8rem;
            font-weight: bold;
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 12px 32px;
            border-radius: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        }
        
        .state-content .state-heading a:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .columns { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            gap: 50px; 
            margin-top: 28px; 
        }
        
        .column { 
            min-width: 240px; 
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        .column:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }
        
        h2 { 
            font-family: 'Playfair Display', serif; 
            font-size: 24px; 
            margin-bottom: 16px; 
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8); 
            border-bottom: 3px solid rgba(255, 255, 255, 0.6); 
            display: inline-block; 
            padding-bottom: 6px;
            letter-spacing: 1px;
        }
        
        ul { 
            list-style: none; 
            padding: 0; 
            margin: 0; 
        }
        
        li { 
            margin: 12px 0; 
            font-size: 16px; 
            color: #ffffff; 
            transition: all 0.3s ease; 
            padding: 8px 12px;
            border-radius: 8px;
        }
        
        li:hover { 
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(8px); 
            color: #fff;
        }
        
        .place-link { 
            color: #ffffff; 
            text-decoration: none; 
            cursor: pointer; 
            padding: 4px 8px; 
            border-radius: 6px; 
            transition: all 0.3s ease; 
        }
        
        .place-link:hover { 
            background: rgba(255, 255, 255, 0.25); 
            color: #fff; 
        }
        
        .place-text {
            color: #ffffff;
            padding: 4px 8px;
            font-weight: 500;
        }

        @media (max-width:900px){
            .header h1{ 
                font-size: 2.2rem; 
            }
            .container {
                width: 100vw;
                max-width: 100vw;
                padding: 0;
            }
            .search-input{ 
                min-width: 100%; 
            }
            .search-form {
                flex-direction: column;
            }
            .search-btn {
                width: 100%;
            }
            .rolling-img{ 
                width: 220px; 
                height: 120px; 
            }
            .state-heading { 
                font-size: 28px; 
            }
            .state-content .state-heading a {
                font-size: 1.5rem;
            }
            h2 { 
                font-size: 18px; 
            }
            li { 
                font-size: 14px; 
            }
            .why-title {
                font-size: 1.5rem;
            }
            .state-section {
                padding: 18px 6px;
                min-height: 320px;
            }
            .chatbot-window {
                width: calc(100% - 10px);
                right: 5px;
                left: 5px;
                bottom: 60px;
                height: 400px;
            }
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6B8E23, #708238);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(107, 142, 35, 0.4);
            transition: all 0.3s ease;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 32px rgba(107, 142, 35, 0.5);
        }

        .chatbot-toggle i {
            color: white;
            font-size: 28px;
        }

        .chatbot-window {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 400px;
            height: 550px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        .chatbot-window.open {
            display: flex;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chatbot-header {
            background: linear-gradient(135deg, #6B8E23, #708238);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: #f8f9fa;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 16px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, #6B8E23, #556B2F);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot {
            align-self: flex-start;
            background: white;
            color: #1f2937;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .message p {
            margin: 0;
            line-height: 1.5;
        }

        .message.bot .typing {
            display: flex;
            gap: 4px;
        }

        .message.bot .typing span {
            width: 8px;
            height: 8px;
            background: #6B8E23;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .message.bot .typing span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .message.bot .typing span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .chatbot-input-area {
            padding: 15px;
            background: white;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 10px;
        }

        .chatbot-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
            font-family: 'Poppins', sans-serif;
        }

        .chatbot-input:focus {
            border-color: #6B8E23;
        }

        .chatbot-send {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6B8E23, #556B2F);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .chatbot-send:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(107, 142, 35, 0.4);
        }

        .chatbot-send:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Cities Grid Styles */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .city-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 2px solid rgba(99, 102, 241, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .city-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            opacity: 0.05;
            transition: left 0.4s ease;
        }

        .city-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .city-card:hover::before {
            left: 0;
        }

        .city-card h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .city-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .city-places {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .place-tag {
            background: var(--primary-light);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .breadcrumb {
            margin-bottom: 2rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="navbar-brand">
                <i class="fas fa-globe-asia"></i>
                SANCHARI
            </a>
            <ul class="navbar-menu" id="navbarMenu">
                <li><a href="#whySanchari">WHY</a></li>
                <li><a href="browse.html">üîç Browse States</a></li>
                <li><a href="#statesSections">Destinations</a></li>
                <li><a href="#" id="loginBtn">Login</a></li>
            </ul>
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
    
    <div class="container">
        <header class="header" role="banner">
            <h1>‚úàÔ∏è SANCHARI</h1>
            <p>Discover curated tips, local food, culture & nearby attractions ‚Äî fast.</p>
            <a href="browse.html" class="explore-link">Browse States & Cities ‚Üí</a>
        </header>

        <section class="search-container card" role="search" aria-label="Search destinations">
            <form id="searchForm" class="search-form">
                <input id="destinationInput" class="search-input" placeholder="Enter destination... (e.g. Kerala)" autocomplete="off" />
                <button id="micBtn" type="button" title="Speak" style="background: none; border: none; outline: none; cursor: pointer; margin-right: 8px; font-size: 1.3rem; color: var(--primary); display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-microphone"></i>
                </button>
                <button id="searchBtn" class="search-btn" type="button">
                    <i class="fas fa-search"></i>&nbsp; Search
                </button>
            </form>
            <div class="suggestions" aria-hidden="false">
                <div class="suggestion-tag" onclick="selectState(this)">Kerala</div>
                <div class="suggestion-tag" onclick="selectState(this)">Tamil Nadu</div>
                <div class="suggestion-tag" onclick="selectState(this)">Karnataka</div>
                <div class="suggestion-tag" onclick="selectState(this)">Jammu and Kashmir</div>
                <div class="suggestion-tag" onclick="selectState(this)">Rajasthan</div>
                <div class="suggestion-tag" onclick="selectState(this)">Uttar Pradesh</div>
                <div class="suggestion-tag" onclick="selectState(this)">Assam</div>
                <div class="suggestion-tag" onclick="selectState(this)">Andhra Pradesh</div>
                <div class="suggestion-tag" onclick="showAllStates()" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%); color: white; border: none;">Show All States</div>
            </div>
        </section>

        <!-- WHY SANCHARI: enlarged & highlighted -->
        <section id="whySanchari" class="why-section card highlight" aria-labelledby="whyTitle">
            <div id="whyTitle" class="why-title">
                <i class="fas fa-lightbulb" style="color:#F59E0B;"></i> Why SANCHARI ‚Äî what makes us unique
            </div>

            <div class="why-list" role="list">
                <div class="why-item" role="listitem">üç≤ Instant Local Insights</div>
                <div class="why-item" role="listitem">üé≠ Cultural Tips</div>
                <div class="why-item" role="listitem">üìç Food & Slang Fun</div>
                <div class="why-item" role="listitem">üí° Weather & Safety Tips</div>
            </div>

            <div class="rolling-wrap" aria-hidden="false">
                <div class="fade-edge left"></div>
                <div class="fade-edge right"></div>

                <div class="rolling-track" id="rollingTrack">
                    <a href="index2.html?city=Munnar" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1546993948-1e205db4d9b7?w=800&auto=format&fit=crop" alt="Munnar Tea Plantations" title="Explore Munnar">
                    </a>
                    <a href="index2.html?city=Kochi" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1562769450-e96893eb64fb?w=800&auto=format&fit=crop" alt="Kochi" title="Explore Kochi">
                    </a>
                    <a href="index2.html?city=Guwahati" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1605640840605-14ac1855827b?w=800&auto=format&fit=crop" alt="Guwahati Kamakhya Temple" title="Explore Guwahati">
                    </a>
                    <a href="index2.html?city=Mysore" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&auto=format&fit=crop" alt="Mysore Palace" title="Explore Mysore">
                    </a>
                    <a href="index2.html?city=Udaipur" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1574196287634-4d17f1ba544e?w=800&auto=format&fit=crop" alt="Udaipur Lake" title="Explore Udaipur">
                    </a>
                    <a href="index2.html?city=Varanasi" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1561361513-2d000a50f0dc?w=800&auto=format&fit=crop" alt="Varanasi Ghats" title="Explore Varanasi">
                    </a>
                    <a href="index2.html?city=Agra" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1564507592333-c60657eea523?w=800&auto=format&fit=crop" alt="Taj Mahal Agra" title="Explore Agra">
                    </a>
                    <a href="index2.html?city=Majuli Island" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&auto=format&fit=crop" alt="Majuli Island" title="Explore Majuli Island">
                    </a>
                    <!-- duplicated set for smooth loop -->
                    <a href="index2.html?city=Munnar" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1546993948-1e205db4d9b7?w=800&auto=format&fit=crop" alt="Munnar Tea Plantations" title="Explore Munnar">
                    </a>
                    <a href="index2.html?city=Kochi" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1562769450-e96893eb64fb?w=800&auto=format&fit=crop" alt="Kochi" title="Explore Kochi">
                    </a>
                    <a href="index2.html?city=Guwahati" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1605640840605-14ac1855827b?w=800&auto=format&fit=crop" alt="Guwahati Kamakhya Temple" title="Explore Guwahati">
                    </a>
                    <a href="index2.html?city=Mysore" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&auto=format&fit=crop" alt="Mysore Palace" title="Explore Mysore">
                    </a>
                    <a href="index2.html?city=Udaipur" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1574196287634-4d17f1ba544e?w=800&auto=format&fit=crop" alt="Udaipur Lake" title="Explore Udaipur">
                    </a>
                    <a href="index2.html?city=Varanasi" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1561361513-2d000a50f0dc?w=800&auto=format&fit=crop" alt="Varanasi Ghats" title="Explore Varanasi">
                    </a>
                    <a href="index2.html?city=Agra" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1564507592333-c60657eea523?w=800&auto=format&fit=crop" alt="Taj Mahal Agra" title="Explore Agra">
                    </a>
                    <a href="index2.html?city=Majuli Island" style="display:inline-block;">
                        <img class="rolling-img" src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&auto=format&fit=crop" alt="Majuli Island" title="Explore Majuli Island">
                    </a>
                </div>
            </div>
        </section>

        <!-- Cities Display Section -->
        <section id="citiesSection" class="card" style="display: none; margin-bottom: 2rem;">
            <div class="breadcrumb" id="breadcrumb" style="display: none;">
                <a href="#" onclick="showStatesView()">üè† Home</a> > 
                <span id="breadcrumbCurrent">State</span>
            </div>
            
            <h2 id="citiesTitle" style="text-align: center; margin-bottom: 1.5rem; color: var(--primary); font-family: 'Caveat Brush', cursive; font-size: 2rem;">
                Cities in State
            </h2>
            
            <div id="citiesLoading" style="display: none; text-align: center; padding: 2rem;">
                <div style="display: inline-block; width: 40px; height: 40px; border: 3px solid var(--primary-light); border-radius: 50%; border-top-color: var(--primary); animation: spin 1s ease-in-out infinite;"></div>
                <p style="margin-top: 1rem; color: var(--text-secondary);">Loading cities...</p>
            </div>
            
            <div id="citiesGrid" class="grid-container" style="display: none;">
                <!-- Cities will be populated here -->
            </div>
            
            <div id="citiesError" style="display: none; text-align: center; padding: 2rem; color: var(--text-secondary);">
                <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem; color: var(--secondary);"></i>
                <p>No cities found for this state. Please try another state.</p>
            </div>
        </section>

        <!-- State Sections (dynamically loaded from MongoDB) -->
        <div id="statesSections"></div>
    </div>

    <!-- Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" id="chatbotToggle">
            <i class="fas fa-comment-dots"></i>
        </button>
        
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <h3>üí¨ SANCHARI AI Assistant</h3>
                <button class="chatbot-close" id="chatbotClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="message bot">
                    <p>Hello! üëã I'm your SANCHARI AI assistant. I can help you with travel planning, destination info, local cuisine, cultural insights, and answer general questions. What would you like to know?</p>
                </div>
            </div>
            
            <div class="chatbot-input-area">
                <input 
                    type="text" 
                    class="chatbot-input" 
                    id="chatbotInput" 
                    placeholder="Ask me anything..."
                    autocomplete="off"
                />
                <button class="chatbot-send" id="chatbotSend">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- User Menu -->
    <div id="userMenu" style="display: none; position: fixed; right: 20px; top: 70px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
        <div style="padding: 15px; border-bottom: 1px solid #eee;">
            <strong id="userDisplayName"></strong>
        </div>
        <div style="padding: 15px;">
            <a href="#" onclick="handleLogout()" style="color: var(--primary); text-decoration: none;">Logout</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script>
    <script>
        // Check authentication on page load
        window.addEventListener('DOMContentLoaded', () => {
            const token = Cookies.get('token');
            if (!token) {
                // User is not logged in, redirect to login page
                window.location.href = 'login.html';
                return;
            }
            // User is logged in, show user name in navbar
            updateNavbarUser();
            
            // Load states data
            loadStates();
        });

        function updateNavbarUser() {
            const userName = Cookies.get('userName');
            const loginBtn = document.getElementById('loginBtn');
            if (userName && loginBtn) {
                loginBtn.innerHTML = `<i class='fas fa-user' style='margin-right:7px;'></i> ${userName}`;
                loginBtn.onclick = function(e) {
                    e.preventDefault();
                    const userMenu = document.getElementById('userMenu');
                    userMenu.style.display = userMenu.style.display === 'none' ? 'block' : 'none';
                };
                
                const userDisplayName = document.getElementById('userDisplayName');
                if (userDisplayName) {
                    userDisplayName.textContent = userName;
                }
            }
        }

        function handleLogout() {
            Cookies.remove('token');
            Cookies.remove('userName');
            Cookies.remove('userEmail');
            window.location.href = 'login.html';
        }

        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            const loginBtn = document.getElementById('loginBtn');
            if (userMenu && loginBtn && !userMenu.contains(event.target) && event.target !== loginBtn) {
                userMenu.style.display = 'none';
            }
        });

        let statesData = [];
        let currentState = null;

        // Function to show states view (hide cities, show states)
        function showStatesView() {
            document.getElementById('citiesSection').style.display = 'none';
            document.getElementById('statesSections').style.display = 'block';
            
            // Clear active state
            currentState = null;
            
            // Clear active suggestion tags
            document.querySelectorAll('.suggestion-tag').forEach(tag => tag.classList.remove('active'));
        }

        // Function to load cities for a selected state
        async function loadCitiesForState(stateId, stateName) {
            currentState = { id: stateId, name: stateName };
            
            // Hide states section and show cities section
            document.getElementById('statesSections').style.display = 'none';
            document.getElementById('citiesSection').style.display = 'block';
            document.getElementById('citiesTitle').textContent = `Cities in ${stateName}`;
            document.getElementById('breadcrumb').style.display = 'block';
            document.getElementById('breadcrumbCurrent').textContent = stateName;
            
            // Show loading
            document.getElementById('citiesLoading').style.display = 'block';
            document.getElementById('citiesGrid').style.display = 'none';
            document.getElementById('citiesError').style.display = 'none';
            
            try {
                // Fetch cities for this state using the correct endpoint
                const response = await fetch(`/api/states/${stateId}/cities`);
                let cities = [];
                
                if (response.ok) {
                    cities = await response.json();
                } else {
                    console.error('Failed to fetch cities for state:', response.status, response.statusText);
                    // Fallback: get all cities and filter by state_id
                    const allCitiesResponse = await fetch('/api/cities');
                    if (allCitiesResponse.ok) {
                        const allCities = await allCitiesResponse.json();
                        cities = allCities.filter(city => city.state_id === stateId);
                    }
                }
                
                console.log(`Loaded ${cities.length} cities for ${stateName}`);
                
                // Hide loading
                document.getElementById('citiesLoading').style.display = 'none';
                
                if (cities.length > 0) {
                    renderCities(cities);
                    document.getElementById('citiesGrid').style.display = 'grid';
                } else {
                    document.getElementById('citiesError').style.display = 'block';
                }
                
                // Scroll to cities section
                document.getElementById('citiesSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
                
            } catch (error) {
                console.error('Error loading cities:', error);
                document.getElementById('citiesLoading').style.display = 'none';
                document.getElementById('citiesError').style.display = 'block';
            }
        }

        // Function to render cities in the grid
        function renderCities(cities) {
            const grid = document.getElementById('citiesGrid');
            
            grid.innerHTML = cities.map(city => {
                const popularPlaces = city.popular_places || [];
                const firstThreePlaces = popularPlaces.slice(0, 3);
                
                return `
                    <div class="city-card" onclick="goToCityDetails('${city.name}')">
                        <h3>${city.name}</h3>
                        <p>Explore this beautiful city with ${popularPlaces.length} popular attractions</p>
                        ${firstThreePlaces.length > 0 ? `
                            <div class="city-places">
                                ${firstThreePlaces.map(place => `
                                    <span class="place-tag">${place.name}</span>
                                `).join('')}
                                ${popularPlaces.length > 3 ? `<span class="place-tag">+${popularPlaces.length - 3} more</span>` : ''}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // Function to navigate to city details
        function goToCityDetails(cityName) {
            window.location.href = `index2.html?city=${encodeURIComponent(cityName)}`;
        }

        // Fetch states data from API and render
        async function loadStates() {
            try {
                const response = await fetch('/api/states');
                const states = await response.json();
                statesData = states;
                
                renderStateSections(states);
            } catch (error) {
                console.error('Error loading states:', error);
            }
        }

        // Render state sections dynamically (hidden by default, shown on search)
        function renderStateSections(states) {
            const container = document.getElementById('statesSections');
            
            // List of cities that exist in the database
            const availableCities = [
                'Munnar', 'Kochi', 'Kochi (Cochin)', 'Alleppey', 'Alleppey (Alappuzha)',
                'Ooty', 'Ooty (Ootacamund)', 'Mahabalipuram', 'Kodaikanal',
                'Mysore', 'Coorg', 'Coorg (Kodagu)', 'Gokarna',
                'Udaipur', 'Jaisalmer',
                'Guwahati', 'Jorhat', 'Kaziranga National Park', 'Kamakhya Temple', 'Manas National Park',
                'Haflong', 'Tezpur', 'Majuli Island', 'Sualkuchi', 'Tinsukia', 'Pabitora Wildlife Sanctuary',
                'Digboi', 'Panimur Waterfalls', 'Dibru Saikhowa',
                'Agra', 'Varanasi', 'Varanasi (Kasi)', 'Mathura', 'Sarnath', 'Fatehpur Sikri', 
                'Ayodhya', 'Prayagraj', 'Dudhwa National Park', 'Agra Fort',
                'Visakhapatnam',
                'Srinagar', 'Gulmarg'
            ];
            
            // Function to check if a place exists in database
            function isCityAvailable(placeName) {
                return availableCities.some(city => 
                    city.toLowerCase().includes(placeName.toLowerCase()) ||
                    placeName.toLowerCase().includes(city.toLowerCase())
                );
            }
            
            container.innerHTML = states.map(state => `
                <section class="state-section" data-state="${state.name.toLowerCase()}" style="background-image: url('${state.image || ''}'); display: none;">
                    <div class="state-content">
                        <div class="state-heading">
                            <a href="#" onclick="loadCitiesForState('${state._id}', '${state.name}')" style="color: inherit; text-decoration: none;">
                                ${state.name}
                            </a>
                        </div>
                        <div class="columns">
                            <div class="column">
                                <h2>Popular Places</h2>
                                <ul>
                                    ${(state.popularPlaces || []).map(place => {
                                        if (isCityAvailable(place)) {
                                            return `<li><a class="place-link" href="index2.html?city=${encodeURIComponent(place)}">${place}</a></li>`;
                                        } else {
                                            return `<li><span class="place-text">${place}</span></li>`;
                                        }
                                    }).join('')}
                                </ul>
                            </div>
                            <div class="column">
                                <h2>Hidden Places</h2>
                                <ul>
                                    ${(state.hiddenPlaces || []).map(place => {
                                        if (isCityAvailable(place)) {
                                            return `<li><a class="place-link" href="index2.html?city=${encodeURIComponent(place)}">${place}</a></li>`;
                                        } else {
                                            return `<li><span class="place-text">${place}</span></li>`;
                                        }
                                    }).join('')}
                                </ul>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 2rem;">
                            <button onclick="loadCitiesForState('${state._id}', '${state.name}')" 
                                    style="background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%); 
                                           color: white; border: none; padding: 12px 24px; border-radius: 25px; 
                                           font-weight: 600; cursor: pointer; transition: all 0.3s ease;
                                           box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);">
                                üèôÔ∏è View All Cities in ${state.name}
                            </button>
                        </div>
                    </div>
                </section>
            `).join('');
        }

        function selectState(el) {
            // Remove active class from all tags
            document.querySelectorAll('.suggestion-tag').forEach(tag => tag.classList.remove('active'));
            // Add active class to clicked tag
            el.classList.add('active');
            
            const stateName = el.textContent.trim();
            
            // Find the state in our data
            const state = statesData.find(s => s.name.toLowerCase() === stateName.toLowerCase());
            
            if (state) {
                // Load cities for this state
                loadCitiesForState(state._id, state.name);
            } else {
                // Fallback: show state sections (for states not in database)
                showStateSections(stateName);
            }
        }

        // Fallback function to show static state sections
        function showStateSections(stateName) {
            // Hide cities section
            document.getElementById('citiesSection').style.display = 'none';
            document.getElementById('statesSections').style.display = 'block';
            
            // Hide all state sections first
            document.querySelectorAll('.state-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show matching state section and scroll to it
            const matchingSection = document.querySelector(`.state-section[data-state="${stateName.toLowerCase()}"]`);
            if (matchingSection) {
                matchingSection.style.display = 'block';
                matchingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Search functionality
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const query = document.getElementById('destinationInput').value.trim().toLowerCase();
            if (query) {
                // Clear active tags
                document.querySelectorAll('.suggestion-tag').forEach(tag => tag.classList.remove('active'));
                
                // First, try to find exact state match in our database
                const exactStateMatch = statesData.find(state => 
                    state.name.toLowerCase().includes(query)
                );
                
                if (exactStateMatch) {
                    // Load cities for the matched state
                    loadCitiesForState(exactStateMatch._id, exactStateMatch.name);
                    return;
                }
                
                // Check if matches suggestion tag
                const matchingTag = Array.from(document.querySelectorAll('.suggestion-tag'))
                    .find(tag => tag.textContent.toLowerCase().includes(query));
                
                if (matchingTag) {
                    matchingTag.classList.add('active');
                    selectState(matchingTag);
                    return;
                }
                
                // If no exact match, search through places in states
                // Hide cities section and show state sections for broader search
                document.getElementById('citiesSection').style.display = 'none';
                document.getElementById('statesSections').style.display = 'block';
                
                // Hide all state sections first
                document.querySelectorAll('.state-section').forEach(section => {
                    section.style.display = 'none';
                });
                
                // Find matching states
                let foundMatch = false;
                statesData.forEach(state => {
                    if (state.name.toLowerCase().includes(query) || 
                        (state.popularPlaces && state.popularPlaces.some(place => place.toLowerCase().includes(query))) ||
                        (state.hiddenPlaces && state.hiddenPlaces.some(place => place.toLowerCase().includes(query)))) {
                        
                        const section = document.querySelector(`.state-section[data-state="${state.name.toLowerCase()}"]`);
                        if (section) {
                            section.style.display = 'block';
                            foundMatch = true;
                        }
                    }
                });
                
                if (foundMatch) {
                    // Scroll to first visible section
                    const firstVisible = document.querySelector('.state-section[style*="block"]');
                    if (firstVisible) {
                        firstVisible.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                } else {
                    // No matches found
                    alert(`No results found for "${query}". Try searching for a specific state name like "Kerala", "Rajasthan", etc.`);
                }
            }
        });

        function showAllStates() {
            // Clear active tags
            document.querySelectorAll('.suggestion-tag').forEach(tag => tag.classList.remove('active'));
            
            // Hide cities section and show states sections
            document.getElementById('citiesSection').style.display = 'none';
            document.getElementById('statesSections').style.display = 'block';
            
            // Show all state sections
            document.querySelectorAll('.state-section').forEach(section => {
                section.style.display = 'block';
            });
            
            // Scroll to states sections
            const firstSection = document.querySelector('.state-section');
            if (firstSection) {
                firstSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }


        document.getElementById('searchBtn').addEventListener('click', function() {
            document.getElementById('searchForm').dispatchEvent(new Event('submit'));
        });

        // Voice to Text for Search Bar
        const micBtn = document.getElementById('micBtn');
        const destinationInput = document.getElementById('destinationInput');
        let recognition;
        let recognizing = false;
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.lang = 'en-IN';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            recognition.onstart = function() {
                recognizing = true;
                micBtn.style.color = 'var(--accent)';
                micBtn.querySelector('i').classList.add('fa-beat-fade');
            };
            recognition.onend = function() {
                recognizing = false;
                micBtn.style.color = 'var(--primary)';
                micBtn.querySelector('i').classList.remove('fa-beat-fade');
            };
            recognition.onerror = function(event) {
                recognizing = false;
                micBtn.style.color = 'var(--primary)';
                micBtn.querySelector('i').classList.remove('fa-beat-fade');
            };
            recognition.onresult = function(event) {
                if (event.results && event.results[0] && event.results[0][0]) {
                    destinationInput.value = event.results[0][0].transcript;
                    document.getElementById('searchForm').dispatchEvent(new Event('submit'));
                }
            };

            micBtn.addEventListener('click', function() {
                if (recognizing) {
                    recognition.stop();
                } else {
                    recognition.start();
                }
            });
        } else {
            micBtn.style.display = 'none';
        }

        document.getElementById('destinationInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('searchForm').dispatchEvent(new Event('submit'));
            }
        });

        // Chatbot functionality
        const chatbotToggle = document.getElementById('chatbotToggle');
        const chatbotWindow = document.getElementById('chatbotWindow');
        const chatbotClose = document.getElementById('chatbotClose');
        const chatbotMessages = document.getElementById('chatbotMessages');
        const chatbotInput = document.getElementById('chatbotInput');
        const chatbotSend = document.getElementById('chatbotSend');

        chatbotToggle.addEventListener('click', () => {
            chatbotWindow.classList.add('open');
            chatbotInput.focus();
        });

        chatbotClose.addEventListener('click', () => {
            chatbotWindow.classList.remove('open');
        });

        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            messageDiv.innerHTML = `<p>${text}</p>`;
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="typing">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            chatbotMessages.appendChild(typingDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function sendToGemini(userMessage) {
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: userMessage
                    })
                });

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const data = await response.json();
                return data.response;
            } catch (error) {
                console.error('Chat API Error:', error);
                return "Sorry, I'm having trouble connecting right now. Please try again later or explore our destination pages!";
            }
        }

        async function handleUserMessage() {
            const userMessage = chatbotInput.value.trim();
            
            if (!userMessage) return;
            
            // Add user message
            addMessage(userMessage, true);
            chatbotInput.value = '';
            chatbotSend.disabled = true;
            
            // Show typing indicator
            addTypingIndicator();
            
            // Get response from Gemini
            const botResponse = await sendToGemini(userMessage);
            
            // Remove typing indicator and add bot response
            removeTypingIndicator();
            addMessage(botResponse);
            chatbotSend.disabled = false;
            chatbotInput.focus();
        }

        chatbotSend.addEventListener('click', handleUserMessage);

        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleUserMessage();
            }
        });

        // Navbar functionality
        const menuToggle = document.getElementById('menuToggle');
        const navbarMenu = document.getElementById('navbarMenu');

        // Toggle mobile menu
        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navbarMenu.classList.toggle('active');
        });

        // Close mobile menu when clicking a link
        navbarMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                menuToggle.classList.remove('active');
                navbarMenu.classList.remove('active');
            });
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offsetTop = target.offsetTop - 80; // Account for fixed navbar
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Change navbar background on scroll
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.style.background = 'rgba(255, 255, 255, 0.95)';
            } else {
                navbar.style.background = 'rgba(255, 255, 255, 0.85)';
            }
        });
    </script>
</body>
</html>
